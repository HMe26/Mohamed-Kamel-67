<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Medical Records — محمد كامل عيد ابراهيم</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
/* ════════════════════════════════════════════════════════════
   ROOT & RESET
   ════════════════════════════════════════════════════════════ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg:#f0f4f8;
  --card:#fff;
  --accent:#3a7cbd;
  --accent-light:#dbeafe;
  --accent-dark:#1e4d7a;
  --text:#1e293b;
  --text-mid:#64748b;
  --text-muted:#94a3b8;
  --border:#e2e8f0;
  --radius:12px;
  --font:'Inter',system-ui,sans-serif;
}

html{scroll-behavior:smooth}
body{
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  line-height:1.5;
  min-height:100vh;
  -webkit-font-smoothing:antialiased;
}

/* ════════════════════════════════════════════════════════════
   HEADER
   ════════════════════════════════════════════════════════════ */
.header{
  background:var(--card);
  border-bottom:1px solid var(--border);
  position:sticky;top:0;z-index:50;
}
.header-inner{
  max-width:960px;margin:0 auto;
  padding:0 20px;height:56px;
  display:flex;align-items:center;justify-content:space-between;
  gap:16px;
}
.logo{
  font-size:.95rem;font-weight:600;
  color:var(--accent-dark);
  display:flex;align-items:center;gap:8px;
  text-decoration:none;
}
.logo-dot{
  width:10px;height:10px;
  background:var(--accent);border-radius:50%;
}
.nav{display:flex;gap:2px;overflow-x:auto;scrollbar-width:none}
.nav::-webkit-scrollbar{display:none}
.nav a{
  font-size:.78rem;font-weight:500;
  color:var(--text-mid);text-decoration:none;
  padding:6px 11px;border-radius:6px;
  white-space:nowrap;
  transition:background .2s,color .2s;
}
.nav a:hover{background:var(--accent-light);color:var(--accent)}
.nav a.active{background:var(--accent);color:#fff}

/* ════════════════════════════════════════════════════════════
   PATIENT CARD
   ════════════════════════════════════════════════════════════ */
.patient{
  max-width:960px;margin:28px auto 0;padding:0 20px;
}
.patient-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:24px 28px;
  display:flex;align-items:center;gap:22px;
}
.patient-avatar{
  width:64px;height:64px;border-radius:50%;
  background:var(--accent-light);
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
}
.patient-avatar svg{width:32px;height:32px;color:var(--accent)}
.patient-name{
  font-size:1.15rem;font-weight:600;
  color:var(--text);margin-bottom:4px;
}
.patient-meta{
  font-size:.78rem;color:var(--text-muted);
  display:flex;flex-wrap:wrap;gap:14px;margin-bottom:6px;
}
.patient-desc{
  font-size:.82rem;color:var(--text-mid);
  max-width:500px;line-height:1.55;
  white-space:pre-line;
}

/* ════════════════════════════════════════════════════════════
   SECTIONS
   ════════════════════════════════════════════════════════════ */
.sections{
  max-width:960px;margin:24px auto 64px;padding:0 20px;
  display:flex;flex-direction:column;gap:16px;
}
.section{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  overflow:hidden;
}

/* ── Section Header ── */
.sec-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 20px;cursor:pointer;user-select:none;
  transition:background .18s;gap:12px;
}
.sec-head:hover{background:#f8fafc}
.sec-head-left{display:flex;align-items:center;gap:12px}
.sec-icon{
  width:38px;height:38px;border-radius:9px;
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
}
.sec-icon svg{width:20px;height:20px}
.sec-title{font-size:.9rem;font-weight:600;color:var(--text)}
.sec-count{font-size:.74rem;color:var(--text-muted);margin-top:2px}

/* icon colours */
.ic-blue  {background:#dbeafe;color:#2563eb}
.ic-green {background:#dcfce7;color:#16a34a}
.ic-amber {background:#fef3c7;color:#d97706}
.ic-teal  {background:#ccfbf1;color:#0d9488}
.ic-rose  {background:#ffe4e6;color:#e11d48}

.chevron{
  width:18px;height:18px;color:var(--text-muted);
  transition:transform .22s;flex-shrink:0;
}
.section.open .chevron{transform:rotate(180deg)}

/* ── Collapsible Body ── */
.sec-body{
  max-height:0;overflow:hidden;
  transition:max-height .38s cubic-bezier(.4,0,.2,1);
}
.section.open .sec-body{max-height:2000px}
.sec-body-inner{padding:0 20px 20px}

/* ════════════════════════════════════════════════════════════
   IMAGE GRID
   ════════════════════════════════════════════════════════════ */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:10px;
}
.grid-item{
  position:relative;
  aspect-ratio:1;
  border-radius:8px;
  overflow:hidden;
  background:#eef2f7;
  border:1px solid var(--border);
  cursor:pointer;
  transition:transform .2s,box-shadow .2s;
}
.grid-item:hover{
  transform:translateY(-2px);
  box-shadow:0 4px 14px rgba(0,0,0,.1);
}

/* placeholder */
.placeholder{
  width:100%;height:100%;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:6px;
  background:linear-gradient(150deg,#eef2f7 0%,#e2e8f0 100%);
}
.placeholder svg{width:28px;height:28px;opacity:.25;color:var(--accent)}
.placeholder span{font-size:.67rem;color:var(--text-muted);font-weight:500;text-align:center;padding:0 6px}

/* real image */
.grid-item img{
  width:100%;height:100%;object-fit:cover;display:block;
  transition:transform .3s;
}
.grid-item:hover img{transform:scale(1.05)}

/* label overlay */
.item-label{
  position:absolute;bottom:0;left:0;right:0;
  background:linear-gradient(transparent,rgba(0,0,0,.5));
  padding:22px 8px 7px;
  font-size:.68rem;font-weight:500;color:#fff;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}

/* ════════════════════════════════════════════════════════════
   LIGHTBOX  (updated with arrows + counter)
   ════════════════════════════════════════════════════════════ */
.lightbox{
  position:fixed;inset:0;
  background:rgba(8,12,20,.88);
  backdrop-filter:blur(5px);
  z-index:200;
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;
  transition:opacity .22s;
}
.lightbox.open{opacity:1;pointer-events:auto}

/* main image */
.lb-img-wrap{
  position:relative;
  max-width:82vw;
  max-height:80vh;
  display:flex;align-items:center;justify-content:center;
}
.lightbox img{
  max-width:100%;max-height:80vh;
  object-fit:contain;border-radius:8px;
  box-shadow:0 8px 40px rgba(0,0,0,.3);
  transform:scale(.95);transition:transform .25s;
  display:block;
}
.lightbox.open img{transform:scale(1)}

/* ── close button ── */
.lb-close{
  position:fixed;top:18px;right:18px;
  width:38px;height:38px;border-radius:50%;
  background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.18);
  color:#fff;display:flex;align-items:center;justify-content:center;
  cursor:pointer;transition:background .18s;z-index:201;
}
.lb-close:hover{background:rgba(255,255,255,.22)}
.lb-close svg{width:18px;height:18px}

/* ── arrow buttons (prev / next) ── */
.lb-arrow{
  position:fixed;top:50%;
  width:44px;height:44px;
  transform:translateY(-50%);
  background:rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.18);
  border-radius:50%;
  color:#fff;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  transition:background .18s, transform .18s;
  z-index:201;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
}
.lb-arrow:hover{background:rgba(255,255,255,.24)}
.lb-arrow:active{transform:translateY(-50%) scale(.92)}
.lb-arrow svg{width:22px;height:22px}
.lb-arrow--prev{left:14px}
.lb-arrow--next{right:14px}

/* hide arrows when only 1 image */
.lb-arrow.hidden{opacity:0;pointer-events:none}

/* ── caption + counter ── */
.lb-footer{
  position:fixed;
  bottom:22px;left:50%;transform:translateX(-50%);
  display:flex;align-items:center;gap:12px;
  z-index:201;
}
.lb-caption{
  background:rgba(8,12,20,.62);color:#fff;
  font-size:.79rem;padding:7px 16px;border-radius:18px;
  white-space:nowrap;
  max-width:60vw;overflow:hidden;text-overflow:ellipsis;
}
.lb-counter{
  background:rgba(8,12,20,.62);color:rgba(255,255,255,.7);
  font-size:.72rem;font-weight:500;
  padding:7px 12px;border-radius:18px;
  white-space:nowrap;
  min-width:46px;text-align:center;
}

/* ════════════════════════════════════════════════════════════
   RESPONSIVE
   ════════════════════════════════════════════════════════════ */
@media(max-width:580px){
  .patient-card{flex-direction:column;align-items:flex-start;padding:20px}
  .grid{grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:8px}
  .sections,.patient{padding:0 14px}
  .patient{margin-top:18px}
  .sec-body-inner{padding:0 14px 16px}
  .nav a{font-size:.73rem;padding:5px 8px}
  /* smaller arrows on mobile */
  .lb-arrow{width:36px;height:36px}
  .lb-arrow svg{width:18px;height:18px}
  .lb-arrow--prev{left:6px}
  .lb-arrow--next{right:6px}
}
@media(max-width:380px){
  .grid{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>

<!-- ────── HEADER ────── -->
<header class="header">
  <div class="header-inner">
    <a href="#" class="logo"><span class="logo-dot"></span>السجلات الطبية </a>
    <nav class="nav" id="nav">
      <a href="#brain-mri" class="active">رنين المخ</a>
      <a href="#nuclear">مسح ذري</a>
      <a href="#lab">التحاليل</a>
      <a href="#cervical">
        
رنين الفقرات العنقية


      </a>
      <a href="#reports">التقرير</a>
    </nav>
  </div>
</header>

<!-- ────── PATIENT CARD ────── -->
<div class="patient">
  <div class="patient-card">
    <div class="patient-avatar">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
      </svg>
    </div>
    <div>
      <div class="patient-name">محمد كامل عيد إبراهيم</div>
      <div class="patient-meta">
        <span>العمر: 67 سنة</span>
        <span>بداية التعب: 28 / 11 / 2025</span>
      </div>
      <div class="patient-desc">وصف الحالة:

عنده دوخة دايما ومش بيقوم لوحده نهائيا.
في المستشفى عملوا ليه رنين على المخ ومقطعية سليمة.
عمل بزل نخاع — فيه التهاب على المخ — اخد علاجه والتهاب خف، بس المريض مش خف نهائيا.

دكتور البطانة قال مفيهوش حاجة.
دكتور الأنف والأذن قال مفيهوش حاجة.
ومع ذلك مفيش أي تحسن نهائيا.

عينيه معظم الوقت قافلاها، ولما بيفتح عينه مش زي الأول ومش طبيعية.
دايما دايخ ومش عارف يقف نهائيا ولا يتحرك، وتايه معظم الوقت، ولسانه تقيل.

عمل 5 جلسات فصل بلازما — بس تعب أكتر.
أخد علاج كتير — مفيش تحسن.</div>
    </div>
  </div>
</div>

<!-- ────── SECTIONS ────── -->
<div class="sections">

  <!-- 1 رنين المخ -->
  <div class="section open" id="brain-mri">
    <div class="sec-head" onclick="toggle(this)">
      <div class="sec-head-left">
        <div class="sec-icon ic-blue">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a7 7 0 0 1 7 7c0 2.4-1.2 4.5-3 5.7V17a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2.3C6.2 13.5 5 11.4 5 9a7 7 0 0 1 7-7z"/><path d="M9 22h6"/><path d="M10 17v3"/><path d="M14 17v3"/></svg>
        </div>
        <div>
          <div class="sec-title">رنين المخ</div>
          <div class="sec-count">11 صورة</div>
        </div>
      </div>
      <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
    </div>
    <div class="sec-body"><div class="sec-body-inner">
      <div class="grid" id="g-brain"></div>
    </div></div>
  </div>

  <!-- 2 مسح ذري -->
  <div class="section" id="nuclear">
    <div class="sec-head" onclick="toggle(this)">
      <div class="sec-head-left">
        <div class="sec-icon ic-green">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><circle cx="12" cy="12" r="8" stroke-dasharray="4 3"/><path d="M12 2v3M12 19v3M2 12h3M19 12h3"/></svg>
        </div>
        <div>
          <div class="sec-title">مسح ذري</div>
          <div class="sec-count">8 صور</div>
        </div>
      </div>
      <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
    </div>
    <div class="sec-body"><div class="sec-body-inner">
      <div class="grid" id="g-nuclear"></div>
    </div></div>
  </div>

  <!-- 3 التحاليل -->
  <div class="section" id="lab">
    <div class="sec-head" onclick="toggle(this)">
      <div class="sec-head-left">
        <div class="sec-icon ic-amber">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><path d="M9 3h6v5l4 8H5l4-8V3z"/><path d="M9 3H7"/><path d="M15 3h2"/><path d="M6 14h12"/></svg>
        </div>
        <div>
          <div class="sec-title">التحاليل</div>
          <div class="sec-count">10 صور</div>
        </div>
      </div>
      <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
    </div>
    <div class="sec-body"><div class="sec-body-inner">
      <div class="grid" id="g-lab"></div>
    </div></div>
  </div>

  <!-- 4 الفقرات العنقية -->
  <div class="section" id="cervical">
    <div class="sec-head" onclick="toggle(this)">
      <div class="sec-head-left">
        <div class="sec-icon ic-teal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L4 6v5c0 5 3.5 9.5 8 11 4.5-1.5 8-6 8-11V6l-8-4z"/><path d="M9 12l2 2 4-4"/></svg>
        </div>
        <div>
          <div class="sec-title">رنين الفقرات العنقية</div>
          <div class="sec-count">6 صور</div>
        </div>
      </div>
      <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
    </div>
    <div class="sec-body"><div class="sec-body-inner">
      <div class="grid" id="g-cervical"></div>
    </div></div>
  </div>

  <!-- 5 التقرير -->
  <div class="section" id="reports">
    <div class="sec-head" onclick="toggle(this)">
      <div class="sec-head-left">
        <div class="sec-icon ic-rose">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8M16 17H8M10 9H8"/></svg>
        </div>
        <div>
          <div class="sec-title">التقرير</div>
          <div class="sec-count">3 صور</div>
        </div>
      </div>
      <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><path d="M6 9l6 6 6-6"/></svg>
    </div>
    <div class="sec-body"><div class="sec-body-inner">
      <div class="grid" id="g-reports"></div>
    </div></div>
  </div>

</div><!-- /sections -->

<!-- ════════════════════════════════════════════════════════════
     LIGHTBOX  — arrows + counter added
     ════════════════════════════════════════════════════════════ -->
<div class="lightbox" id="lb">

  <!-- close -->
  <button class="lb-close" onclick="closeLB()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
  </button>

  <!-- prev arrow -->
  <button class="lb-arrow lb-arrow--prev" id="lb-prev" onclick="navigate(-1)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
  </button>

  <!-- image -->
  <img src="" alt="" id="lb-img"/>

  <!-- next arrow -->
  <button class="lb-arrow lb-arrow--next" id="lb-next" onclick="navigate(1)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
  </button>

  <!-- footer: caption + counter -->
  <div class="lb-footer">
    <div class="lb-caption" id="lb-cap"></div>
    <div class="lb-counter" id="lb-counter">1 / 1</div>
  </div>
</div>

<!-- ════════════════════════════════════════════════════════════
     DATA
     ════════════════════════════════════════════════════════════ -->
<script>
const DATA = {
  brain:[
    {src:"./الرنين/0.jpeg",  label:"رنين المخ – صورة 1"},
    {src:"./الرنين/1.jpeg",  label:"رنين المخ – صورة 2"},
    {src:"./الرنين/2.jpeg",  label:"رنين المخ – صورة 3"},
    {src:"./الرنين/3.jpeg",  label:"رنين المخ – صورة 4"},
    {src:"./الرنين/4.jpeg",  label:"رنين المخ – صورة 5"},
    {src:"./الرنين/5.jpeg",  label:"رنين المخ – صورة 6"},
    {src:"./الرنين/6.jpeg",  label:"رنين المخ – صورة 7"},
    {src:"./الرنين/7.jpeg",  label:"رنين المخ – صورة 8"},
    {src:"./الرنين/8.jpeg",  label:"رنين المخ – صورة 9"},
    {src:"./الرنين/9.jpeg",  label:"رنين المخ – صورة 10"},
    {src:"./الرنين/10.jpeg", label:"رنين المخ – صورة 11"}
  ],
  nuclear:[
    {src:"./مسح ذري/1.jpeg", label:"مسح ذري – صورة 1"},
    {src:"./مسح ذري/2.jpeg", label:"مسح ذري – صورة 2"},
    {src:"./مسح ذري/3.jpeg", label:"مسح ذري – صورة 3"},
    {src:"./مسح ذري/4.jpeg", label:"مسح ذري – صورة 4"},
    {src:"./مسح ذري/5.jpeg", label:"مسح ذري – صورة 5"},
    {src:"./مسح ذري/6.jpeg", label:"مسح ذري – صورة 6"},
    {src:"./مسح ذري/7.jpeg", label:"مسح ذري – صورة 7"},
    {src:"./مسح ذري/8.jpeg", label:"مسح ذري – صورة 8"}
  ],
  lab:[
    {src:"./التحاليل/1.jpeg",  label:"التحاليل – صورة 1"},
    {src:"./التحاليل/2.jpeg",  label:"التحاليل – صورة 2"},
    {src:"./التحاليل/3.jpeg",  label:"التحاليل – صورة 3"},
    {src:"./التحاليل/4.jpeg",  label:"التحاليل – صورة 4"},
    {src:"./التحاليل/5.jpeg",  label:"التحاليل – صورة 5"},
    {src:"./التحاليل/6.jpeg",  label:"التحاليل – صورة 6"},
    {src:"./التحاليل/7.jpeg",  label:"التحاليل – صورة 7"},
    {src:"./التحاليل/8.jpeg",  label:"التحاليل – صورة 8"},
    {src:"./التحاليل/9.jpeg",  label:"التحاليل – صورة 9"},
    {src:"./التحاليل/10.jpeg", label:"التحاليل – صورة 10"}
  ],
  cervical:[
    {src:"./رنين الفقرات العنقية/1.jpeg", label:"الفقرات العنقية – صورة 1"},
    {src:"./رنين الفقرات العنقية/2.jpeg", label:"الفقرات العنقية – صورة 2"},
    {src:"./رنين الفقرات العنقية/3.jpeg", label:"الفقرات العنقية – صورة 3"},
    {src:"./رنين الفقرات العنقية/4.jpeg", label:"الفقرات العنقية – صورة 4"},
    {src:"./رنين الفقرات العنقية/5.jpeg", label:"الفقرات العنقية – صورة 5"},
    {src:"./رنين الفقرات العنقية/6.jpeg", label:"الفقرات العنقية – صورة 6"}
  ],
  reports:[
    {src:"./التقرير/1.jpeg", label:"التقرير – صورة 1"},
    {src:"./التقرير/2.jpeg", label:"التقرير – صورة 2"},
    {src:"./التقرير/3.jpeg", label:"التقرير – صورة 3"}
  ]
};

/* ════════════════════════════════════════════════════════════
   LIGHTBOX STATE — tracks the current section's array + index
   ════════════════════════════════════════════════════════════ */
let lbItems   = [];   // current section image array
let lbIndex   = 0;    // current position

/* ── Render grid ── */
function render(id, items){
  document.getElementById(id).innerHTML = items.map((it, i) =>
    `<div class="grid-item" onclick="openLB('${id}', ${i})">
       <div class="placeholder">
         <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
           <rect x="3" y="3" width="18" height="18" rx="3"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/>
         </svg>
         <span>${it.label.split('–')[0].trim()}</span>
       </div>
       <div class="item-label">${it.label}</div>
     </div>`
  ).join('');

  // swap placeholder → real image if file loads
  items.forEach((it, i) => {
    const img = new Image();
    img.onload = () => {
      const card = document.querySelectorAll(`#${id} .grid-item`)[i];
      if(!card) return;
      const ph = card.querySelector('.placeholder');
      if(!ph) return;
      const real = document.createElement('img');
      real.src = it.src;
      real.alt = it.label;
      ph.replaceWith(real);
    };
    img.src = it.src;
  });
}

render('g-brain',    DATA.brain);
render('g-nuclear',  DATA.nuclear);
render('g-lab',      DATA.lab);
render('g-cervical', DATA.cervical);
render('g-reports',  DATA.reports);

/* ── map grid-id → DATA key ── */
const gridToData = {
  'g-brain':    'brain',
  'g-nuclear':  'nuclear',
  'g-lab':      'lab',
  'g-cervical': 'cervical',
  'g-reports':  'reports'
};

/* ════════════════════════════════════════════════════════════
   LIGHTBOX FUNCTIONS
   ════════════════════════════════════════════════════════════ */

function openLB(gridId, index){
  const key   = gridToData[gridId];
  lbItems     = DATA[key];
  lbIndex     = index;
  showImage();
  document.getElementById('lb').classList.add('open');
  document.body.style.overflow = 'hidden';
}

/* show current image + update caption & counter */
function showImage(){
  const it = lbItems[lbIndex];
  document.getElementById('lb-img').src   = it.src;
  document.getElementById('lb-img').alt   = it.label;
  document.getElementById('lb-cap').textContent    = it.label;
  document.getElementById('lb-counter').textContent = (lbIndex + 1) + ' / ' + lbItems.length;

  // hide arrows if only one image
  const hide = lbItems.length <= 1;
  document.getElementById('lb-prev').classList.toggle('hidden', hide);
  document.getElementById('lb-next').classList.toggle('hidden', hide);
}

/* move by +1 or -1, wraps around */
function navigate(dir){
  lbIndex = (lbIndex + dir + lbItems.length) % lbItems.length;
  showImage();
}

function closeLB(){
  document.getElementById('lb').classList.remove('open');
  document.body.style.overflow = '';
}

/* ── close on backdrop click ── */
document.getElementById('lb').addEventListener('click', function(e){
  if(e.target === this) closeLB();
});

/* ── keyboard: Escape / Left / Right ── */
document.addEventListener('keydown', function(e){
  if(!document.getElementById('lb').classList.contains('open')) return;
  if(e.key === 'Escape')     closeLB();
  if(e.key === 'ArrowLeft')  navigate(-1);
  if(e.key === 'ArrowRight') navigate(1);
});

/* ════════════════════════════════════════════════════════════
   SECTION TOGGLE
   ════════════════════════════════════════════════════════════ */
function toggle(head){ head.closest('.section').classList.toggle('open') }

/* ════════════════════════════════════════════════════════════
   NAV HIGHLIGHT ON SCROLL
   ════════════════════════════════════════════════════════════ */
const navAs = document.querySelectorAll('.nav a');
const secs  = document.querySelectorAll('.section[id]');
window.addEventListener('scroll', () => {
  let cur = '';
  secs.forEach(s => { if(window.scrollY + 80 >= s.offsetTop) cur = s.id });
  navAs.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + cur));
});
</script>
</body>
</html>